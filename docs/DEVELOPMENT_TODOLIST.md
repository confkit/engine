# confkit å¼€å‘ Todolist

## å¼€å‘åŸåˆ™
- æŒ‰ CLI å‘½ä»¤ä½¿ç”¨é¡ºåºå¼€å‘ (builder â†’ run â†’ task â†’ logs â†’ interactive)
- æ¯ä¸ªå‘½ä»¤éƒ½èƒ½ç‹¬ç«‹éªŒè¯åŠŸèƒ½
- interactive å¯è°ƒç”¨æ‰€æœ‰å…¶ä»–å‘½ä»¤åŠŸèƒ½
- åŸºäºç°æœ‰é…ç½®ç¤ºä¾‹è¿›è¡ŒåŠŸèƒ½è®¾è®¡

## é˜¶æ®µ 1: åŸºç¡€é…ç½®è§£æ (P0)
> ç›®æ ‡ï¼šèƒ½å¤Ÿè§£æå’ŒéªŒè¯é…ç½®æ–‡ä»¶ï¼ˆæ‰€æœ‰å‘½ä»¤çš„åŸºç¡€ï¼‰

### 1.1 é…ç½®æ–‡ä»¶è§£æ
- [x] å®Œå–„ `ProjectConfig::from_file()` å®ç°
- [x] å®ç°é…ç½®æ–‡ä»¶éªŒè¯ `ProjectConfig::validate()`
- [x] æ”¯æŒç¯å¢ƒå˜é‡æ›¿æ¢ (`${GIT_REPO}`, `${PROJECT_NAME}`)
- [ ] æ·»åŠ é…ç½®è§£æé”™è¯¯å¤„ç†

**éªŒè¯æ–¹å¼**: èƒ½å¤ŸæˆåŠŸè§£æ examples ä¸­çš„é…ç½®æ–‡ä»¶

## é˜¶æ®µ 2: Builder å‘½ä»¤å®ç° (P0)
> ç›®æ ‡ï¼šå®ç°æ„å»ºå™¨é•œåƒä¸å®¹å™¨çš„åˆ†å±‚ç®¡ç†

### 2.1 é•œåƒç®¡ç†
- [x] å®ç° `ImageManager::list_images()`
- [x] å®ç° `ImageManager::create_image()`ï¼ˆæ‹‰å–/æ„å»ºé•œåƒï¼‰
- [x] å®ç° `ImageManager::remove_image()`

### 2.2 æ„å»ºå™¨å®¹å™¨ç®¡ç†
- [x] å®ç° `BuilderManager::list_builders()`ï¼Œæ”¯æŒçœŸå® Docker çŠ¶æ€
- [x] å®ç° `BuilderManager::create_builder()`ï¼ˆåŸºäº docker-compose.yml çš„ service åˆ›å»ºå®¹å™¨ï¼‰
- [x] å®ç° `BuilderManager::start_builder()`
- [x] å®ç° `BuilderManager::stop_builder()`
- [x] å®ç° `BuilderManager::restart_builder()`
- [x] å®ç° `BuilderManager::remove_builder()`
- [ ] å®ç° `BuilderManager::health_check()`
- [ ] å®ç° `BuilderManager::logs()`ï¼ˆæŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼‰

### 2.3 Builder å‘½ä»¤
- [x] å®ç° `confkit builder image list`         # é•œåƒåˆ—è¡¨
- [x] å®ç° `confkit builder image create <image>` # æ‹‰å–/æ„å»ºé•œåƒ
- [x] å®ç° `confkit builder image remove <image>` # åˆ é™¤é•œåƒ
- [x] å®ç° `confkit builder list`               # åˆ—å‡ºæ‰€æœ‰æ„å»ºå™¨å®¹å™¨åŠå…¶çŠ¶æ€
- [x] å®ç° `confkit builder create <name>`      # åŸºäº docker-compose.yml çš„ service åˆ›å»ºå®¹å™¨
- [x] å®ç° `confkit builder start <name>`       # å¯åŠ¨å®¹å™¨
- [x] å®ç° `confkit builder stop <name>`        # åœæ­¢å®¹å™¨
- [x] å®ç° `confkit builder restart <name>`     # é‡å¯å®¹å™¨
- [x] å®ç° `confkit builder remove <name>`      # åˆ é™¤å®¹å™¨
- [x] å®ç° `confkit builder health <name>`      # æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶æ€
- [ ] å®ç° `confkit builder logs <name>`        # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
- [x] äº¤äº’å¼ builder list æ”¯æŒå‚æ•°é€‰æ‹©ã€çŠ¶æ€è¿‡æ»¤ã€è¯¦ç»†æ¨¡å¼
- [x] äº¤äº’å¼ builder list è¾“å‡ºç¬¦åˆ ASCII å›¾æ ‡è§„èŒƒï¼ˆâ€¢ã€â—ã€â–¶ã€âœ“ã€âœ—ã€â†’ã€â€» ç­‰ï¼Œé™¤ ğŸ‘‹ ä¿ç•™ï¼‰

**éªŒè¯æ–¹å¼**: èƒ½å¤Ÿç®¡ç† Docker é•œåƒä¸å®¹å™¨ï¼Œå‘½ä»¤åˆ†å±‚æ¸…æ™°

## é˜¶æ®µ 3: Run å‘½ä»¤å®ç° (P0)
> ç›®æ ‡ï¼šå®ç°ä»»åŠ¡æ‰§è¡Œçš„æ ¸å¿ƒåŠŸèƒ½

### 3.1 ä»»åŠ¡ç®¡ç†æ ¸å¿ƒ
- [ ] å®ç° `TaskManager::generate_task_id()`
- [ ] å®ç°ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª (Pending, Running, Success, Failed)
- [ ] å®ç°ä»»åŠ¡ä¸Šä¸‹æ–‡ `TaskContext`
- [ ] å®ç° `TaskManager::execute_task()` æ¡†æ¶

### 3.2 æ­¥éª¤æ‰§è¡Œå¼•æ“
- [ ] å®ç° `StepEngine::execute_step()` 
- [ ] å®ç°æœ¬åœ°å‘½ä»¤æ‰§è¡Œï¼ˆéå®¹å™¨æ¨¡å¼ï¼‰
- [ ] å®ç°å®¹å™¨åŒ–å‘½ä»¤æ‰§è¡Œ
- [ ] å®ç°å·¥ä½œç›®å½•å’Œç¯å¢ƒå˜é‡å¤„ç†

### 3.3 Git é›†æˆ
- [ ] å®ç° `GitClient::clone_repository()`
- [ ] å®ç°åˆ†æ”¯åˆ‡æ¢ `checkout_branch()`
- [ ] é›†æˆ Git æ“ä½œåˆ°æ­¥éª¤æ‰§è¡Œ

### 3.4 Run å‘½ä»¤
- [ ] å®ç° `confkit run <config.yml>`
- [ ] æ”¯æŒ `--git-branch`, `--parallel`, `--force` ç­‰é€‰é¡¹
- [ ] å®ç° `--dry-run` æ¨¡å¼
- [ ] å®ç°æ­¥éª¤ä¾èµ–è§£æå’Œæ‰§è¡Œé¡ºåº

**éªŒè¯æ–¹å¼**: èƒ½å¤Ÿå®Œæ•´æ‰§è¡Œ examples ä¸­çš„æ„å»ºé…ç½®

## é˜¶æ®µ 4: Task å‘½ä»¤å®ç° (P1)
> ç›®æ ‡ï¼šå®ç°ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢å’Œç®¡ç†

### 4.1 ä»»åŠ¡æŸ¥è¯¢
- [ ] å®ç° `confkit task list`
- [ ] å®ç° `confkit task show <task-id>`
- [ ] å®ç°ä»»åŠ¡çŠ¶æ€æ ¼å¼åŒ–è¾“å‡º
- [ ] å®ç°ä»»åŠ¡å†å²è®°å½•

### 4.2 ä»»åŠ¡æ§åˆ¶
- [ ] å®ç° `confkit task kill <task-id>`
- [ ] å®ç° `confkit task restart <task-id>`
- [ ] å®ç° `confkit task clean` (æ¸…ç†å·²å®Œæˆä»»åŠ¡)

### 4.3 å­˜å‚¨ç®¡ç†
- [ ] å®ç°å·¥ä½œç©ºé—´ç®¡ç† `create_task_workspace()`
- [ ] å®ç°äº§ç‰©ç®¡ç† `save_artifact()`, `list_task_artifacts()`

**éªŒè¯æ–¹å¼**: è¿è¡Œä»»åŠ¡åèƒ½æŸ¥çœ‹å’Œç®¡ç†ä»»åŠ¡çŠ¶æ€

## é˜¶æ®µ 5: Logs å‘½ä»¤å®ç° (P1)
> ç›®æ ‡ï¼šå®ç°å®Œæ•´çš„æ—¥å¿—è®°å½•å’ŒæŸ¥çœ‹

### 5.1 æ—¥å¿—ç³»ç»Ÿ
- [ ] å®ç° `LoggingManager` æ ¸å¿ƒåŠŸèƒ½
- [ ] å®ç°ä»»åŠ¡æ—¥å¿—æ–‡ä»¶åˆ›å»ºå’Œå†™å…¥
- [ ] å®ç°æ­¥éª¤æ—¥å¿—åˆ†ç¦»è®°å½•
- [ ] å®ç°æ—¥å¿—çº§åˆ«å’Œæ—¶é—´æˆ³

### 5.2 Logs å‘½ä»¤
- [ ] å®ç° `confkit logs <project-name>`
- [ ] å®ç° `--follow` å®æ—¶è·Ÿè¸ªæ¨¡å¼
- [ ] å®ç° `--step <step-name>` æ­¥éª¤è¿‡æ»¤
- [ ] å®ç° `--lines <n>` è¡Œæ•°é™åˆ¶
- [ ] å®ç° `--level <level>` æ—¥å¿—çº§åˆ«è¿‡æ»¤

**éªŒè¯æ–¹å¼**: æ‰§è¡Œä»»åŠ¡åèƒ½æŸ¥çœ‹å’Œè·Ÿè¸ªå„ç§æ ¼å¼çš„æ—¥å¿—

## é˜¶æ®µ 6: Interactive å‘½ä»¤å®ç° (P2)
> ç›®æ ‡ï¼šå®ç°äº¤äº’å¼ç•Œé¢ï¼Œé›†æˆæ‰€æœ‰å‘½ä»¤åŠŸèƒ½

### 6.1 äº¤äº’å¼æ ¸å¿ƒ
- [x] å®ç°ä¸»èœå•ç•Œé¢
- [ ] å®ç°é¡¹ç›®é…ç½®é€‰æ‹©
- [ ] å®ç°å®æ—¶çŠ¶æ€æ˜¾ç¤º

### 6.2 å‘½ä»¤é›†æˆ
- [x] é›†æˆ builder å‘½ä»¤åŠŸèƒ½
  - [x] start
  - [x] stop
  - [x] remove
  - [x] image 
    - [x] list 
    - [x] create
    - [x] remove
- [x] é›†æˆ run å‘½ä»¤åŠŸèƒ½  
- [ ] é›†æˆ task å‘½ä»¤åŠŸèƒ½
- [ ] é›†æˆ logs å‘½ä»¤åŠŸèƒ½

### 6.3 äº¤äº’å¼å¢å¼º
- [ ] å®ç°å¿«æ·é”®æ“ä½œ
- [ ] å®ç°ä»»åŠ¡è¿›åº¦å¯è§†åŒ–
- [ ] å®ç°å®æ—¶æ—¥å¿—æ˜¾ç¤º

**éªŒè¯æ–¹å¼**: `confkit interactive` èƒ½è°ƒç”¨æ‰€æœ‰å…¶ä»–å‘½ä»¤åŠŸèƒ½

## é˜¶æ®µ 7: é«˜çº§åŠŸèƒ½å¢å¼º (P2)
> ç›®æ ‡ï¼šå®Œå–„å¹¶è¡Œæ‰§è¡Œã€é€šçŸ¥ç­‰é«˜çº§ç‰¹æ€§

### 7.1 å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- [ ] å®ç°ä¾èµ–å›¾æ„å»ºå’Œå¾ªç¯æ£€æµ‹
- [ ] å®ç° `parallel_group` æ”¯æŒ
- [ ] å®ç°æ­¥éª¤å¹¶å‘æ§åˆ¶

### 7.2 é€šçŸ¥ç³»ç»Ÿ
- [ ] å®ç° Webhook é€šçŸ¥
- [ ] å®ç°æ„å»ºçŠ¶æ€é€šçŸ¥

### 7.3 ç½‘ç»œå·¥å…·
- [ ] å®ç°ç½‘ç»œè¿æ¥æµ‹è¯•
- [ ] å®ç°ä»£ç†æ”¯æŒ

**éªŒè¯æ–¹å¼**: éªŒè¯å¤æ‚ä¾èµ–å…³ç³»å’Œé€šçŸ¥åŠŸèƒ½

## éªŒè¯é‡Œç¨‹ç¢‘

### é‡Œç¨‹ç¢‘ 1: åŸºç¡€æ„å»ºå™¨ (é˜¶æ®µ 1-2)
èƒ½å¤Ÿè§£æé…ç½®æ–‡ä»¶å¹¶ç®¡ç† Docker æ„å»ºå™¨

### é‡Œç¨‹ç¢‘ 2: æ ¸å¿ƒæ‰§è¡Œ (é˜¶æ®µ 3) 
å®Œæ•´çš„ä»»åŠ¡æ‰§è¡Œæµç¨‹ï¼Œæ”¯æŒæœ¬åœ°å’Œå®¹å™¨åŒ–æ„å»º

### é‡Œç¨‹ç¢‘ 3: çŠ¶æ€ç®¡ç† (é˜¶æ®µ 4-5)
ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢å’Œå®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿ

### é‡Œç¨‹ç¢‘ 4: äº¤äº’å®Œæ•´ (é˜¶æ®µ 6)
äº¤äº’å¼ç•Œé¢é›†æˆæ‰€æœ‰å‘½ä»¤åŠŸèƒ½

### é‡Œç¨‹ç¢‘ 5: ç”Ÿäº§å°±ç»ª (é˜¶æ®µ 7)
å¹¶è¡Œæ‰§è¡Œã€é€šçŸ¥ç­‰é«˜çº§ç‰¹æ€§çš„ç”Ÿäº§çº§å·¥å…· 