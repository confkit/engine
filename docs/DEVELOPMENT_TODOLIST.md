# confkit å¼€å‘ Todolist

## å¼€å‘åŸåˆ™
- æŒ‰ CLI å‘½ä»¤ä½¿ç”¨é¡ºåºå¼€å‘ (builder â†’ run â†’ task â†’ logs â†’ interactive)
- æ¯ä¸ªå‘½ä»¤éƒ½èƒ½ç‹¬ç«‹éªŒè¯åŠŸèƒ½
- interactive å¯è°ƒç”¨æ‰€æœ‰å…¶ä»–å‘½ä»¤åŠŸèƒ½
- åŸºäºç°æœ‰é…ç½®ç¤ºä¾‹è¿›è¡ŒåŠŸèƒ½è®¾è®¡

## âœ… é˜¶æ®µ 1: åŸºç¡€é…ç½®è§£æ (P0) - å·²å®Œæˆ
> ç›®æ ‡ï¼šèƒ½å¤Ÿè§£æå’ŒéªŒè¯é…ç½®æ–‡ä»¶ï¼ˆæ‰€æœ‰å‘½ä»¤çš„åŸºç¡€ï¼‰

### 1.1 é…ç½®æ–‡ä»¶è§£æ âœ…
- [x] å®Œå–„ `ProjectConfig::from_file()` å®ç°
- [x] å®ç°é…ç½®æ–‡ä»¶éªŒè¯ `ProjectConfig::validate()`
- [x] æ”¯æŒç¯å¢ƒå˜é‡æ›¿æ¢ (`${GIT_REPO}`, `${PROJECT_NAME}`)
- [x] æ·»åŠ é…ç½®è§£æé”™è¯¯å¤„ç†

**éªŒè¯ç»“æœ**: âœ… èƒ½å¤ŸæˆåŠŸè§£æ examples ä¸­çš„é…ç½®æ–‡ä»¶

## âœ… é˜¶æ®µ 2: Builder å‘½ä»¤å®ç° (P0) - å·²å®Œæˆ
> ç›®æ ‡ï¼šå®ç°æ„å»ºå™¨é•œåƒä¸å®¹å™¨çš„åˆ†å±‚ç®¡ç†

### 2.1 é•œåƒç®¡ç† âœ…
- [x] å®ç° `ImageManager::list_images()`
- [x] å®ç° `ImageManager::create_image()`ï¼ˆæ‹‰å–/æ„å»ºé•œåƒï¼‰
- [x] å®ç° `ImageManager::remove_image()`

### 2.2 æ„å»ºå™¨å®¹å™¨ç®¡ç† âœ…
- [x] å®ç° `BuilderManager::list_builders()`ï¼Œæ”¯æŒçœŸå® Docker çŠ¶æ€
- [x] å®ç° `BuilderManager::create_builder()`ï¼ˆåŸºäº docker-compose.yml çš„ service åˆ›å»ºå®¹å™¨ï¼‰
- [x] å®ç° `BuilderManager::start_builder()`
- [x] å®ç° `BuilderManager::stop_builder()`
- [x] å®ç° `BuilderManager::restart_builder()`
- [x] å®ç° `BuilderManager::remove_builder()`
- [x] å®ç° `BuilderManager::health_check()`
- [x] å®ç° `BuilderManager::logs()`ï¼ˆæŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼‰

### 2.3 Builder å‘½ä»¤ âœ…
- [x] å®ç° `confkit builder image list`         # é•œåƒåˆ—è¡¨
- [x] å®ç° `confkit builder image create <image>` # æ‹‰å–/æ„å»ºé•œåƒ
- [x] å®ç° `confkit builder image remove <image>` # åˆ é™¤é•œåƒ
- [x] å®ç° `confkit builder list`               # åˆ—å‡ºæ‰€æœ‰æ„å»ºå™¨å®¹å™¨åŠå…¶çŠ¶æ€
- [x] å®ç° `confkit builder create <name>`      # åŸºäº docker-compose.yml çš„ service åˆ›å»ºå®¹å™¨
- [x] å®ç° `confkit builder start <name>`       # å¯åŠ¨å®¹å™¨
- [x] å®ç° `confkit builder stop <name>`        # åœæ­¢å®¹å™¨
- [x] å®ç° `confkit builder restart <name>`     # é‡å¯å®¹å™¨
- [x] å®ç° `confkit builder remove <name>`      # åˆ é™¤å®¹å™¨
- [x] å®ç° `confkit builder health <name>`      # æ£€æŸ¥å®¹å™¨å¥åº·çŠ¶æ€
- [x] å®ç° `confkit builder logs <name>`        # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
- [x] äº¤äº’å¼ builder list æ”¯æŒå‚æ•°é€‰æ‹©ã€çŠ¶æ€è¿‡æ»¤ã€è¯¦ç»†æ¨¡å¼
- [x] äº¤äº’å¼ builder list è¾“å‡ºç¬¦åˆ ASCII å›¾æ ‡è§„èŒƒï¼ˆâ€¢ã€â—ã€â–¶ã€âœ“ã€âœ—ã€â†’ã€â€» ç­‰ï¼Œé™¤ ğŸ‘‹ ä¿ç•™ï¼‰

**éªŒè¯ç»“æœ**: âœ… èƒ½å¤Ÿç®¡ç† Docker é•œåƒä¸å®¹å™¨ï¼Œå‘½ä»¤åˆ†å±‚æ¸…æ™°

## ğŸš§ é˜¶æ®µ 3: Run å‘½ä»¤å®ç° (P0) - åŸºç¡€å®Œæˆ
> ç›®æ ‡ï¼šå®ç°ä»»åŠ¡æ‰§è¡Œçš„æ ¸å¿ƒåŠŸèƒ½

### 3.1 ä»»åŠ¡ç®¡ç†æ ¸å¿ƒ âœ…
- [x] å®ç° `TaskManager::generate_task_id()`
- [x] å®ç°ä»»åŠ¡çŠ¶æ€è·Ÿè¸ª (Pending, Running, Success, Failed)
- [x] å®ç°ä»»åŠ¡ä¸Šä¸‹æ–‡ `TaskContext`
- [x] å®ç° `TaskManager::execute_task()` æ¡†æ¶

### 3.2 æ­¥éª¤æ‰§è¡Œå¼•æ“ ğŸš§
- [x] å®ç° `StepEngine::execute_step()` åŸºç¡€ç‰ˆæœ¬
- [x] å®ç°æœ¬åœ°å‘½ä»¤æ‰§è¡Œï¼ˆéå®¹å™¨æ¨¡å¼ï¼‰
- [x] å®ç°å®¹å™¨åŒ–å‘½ä»¤æ‰§è¡Œ
- [x] å®ç°å·¥ä½œç›®å½•å’Œç¯å¢ƒå˜é‡å¤„ç†

### 3.3 Git é›†æˆ âœ…
- [x] å®ç° `GitClient::clone_repository()`
- [x] å®ç°åˆ†æ”¯åˆ‡æ¢ `checkout_branch()`
- [x] é›†æˆ Git æ“ä½œåˆ°æ­¥éª¤æ‰§è¡Œ
- [x] Git ç¯å¢ƒå˜é‡è‡ªåŠ¨æ³¨å…¥ (`GIT_HASH`, `GIT_COMMIT_HASH`, `GIT_COMMIT_SHORT`, `GIT_TAG`)

### 3.4 Run å‘½ä»¤ âœ…
- [x] å®ç° `confkit run --space <space> --project <project>`
- [x] æ”¯æŒ `--git-branch`, `--force`, `--dry-run` ç­‰é€‰é¡¹
- [x] å®ç°åŸºç¡€æ­¥éª¤æ‰§è¡Œ
- [ ] å®ç°æ­¥éª¤ä¾èµ–è§£æå’Œæ‰§è¡Œé¡ºåºï¼ˆé«˜çº§åŠŸèƒ½ï¼‰

**éªŒè¯ç»“æœ**: âœ… èƒ½å¤ŸåŸºç¡€æ‰§è¡Œ examples ä¸­çš„æ„å»ºé…ç½®

## ğŸ”„ é˜¶æ®µ 4: Task å‘½ä»¤å®ç° (P1) - å¾…å¼€å‘
> ç›®æ ‡ï¼šå®ç°ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢å’Œç®¡ç†

### 4.1 ä»»åŠ¡æŸ¥è¯¢
- [ ] å®ç° `confkit task list`
- [ ] å®ç° `confkit task show <task-id>`
- [ ] å®ç°ä»»åŠ¡çŠ¶æ€æ ¼å¼åŒ–è¾“å‡º
- [ ] å®ç°ä»»åŠ¡å†å²è®°å½•

### 4.2 ä»»åŠ¡æ§åˆ¶
- [ ] å®ç° `confkit task kill <task-id>`
- [ ] å®ç° `confkit task restart <task-id>`
- [ ] å®ç° `confkit task clean` (æ¸…ç†å·²å®Œæˆä»»åŠ¡)

### 4.3 å­˜å‚¨ç®¡ç†
- [ ] å®ç°å·¥ä½œç©ºé—´ç®¡ç† `create_task_workspace()`
- [ ] å®ç°äº§ç‰©ç®¡ç† `save_artifact()`, `list_task_artifacts()`

**éªŒè¯ç›®æ ‡**: è¿è¡Œä»»åŠ¡åèƒ½æŸ¥çœ‹å’Œç®¡ç†ä»»åŠ¡çŠ¶æ€

## âœ… é˜¶æ®µ 5: Log å‘½ä»¤å®ç° (P1) - å·²å®Œæˆ
> ç›®æ ‡ï¼šå®ç°å®Œæ•´çš„æ—¥å¿—è®°å½•å’ŒæŸ¥çœ‹

### 5.1 æ—¥å¿—ç³»ç»Ÿ âœ…
- [x] å®ç° `LoggingManager` æ ¸å¿ƒåŠŸèƒ½
- [x] å®ç°ä»»åŠ¡æ—¥å¿—æ–‡ä»¶åˆ›å»ºå’Œå†™å…¥
- [x] å®ç°æ­¥éª¤æ—¥å¿—åˆ†ç¦»è®°å½•
- [x] å®ç°æ—¥å¿—çº§åˆ«å’Œæ—¶é—´æˆ³

### 5.2 Log å‘½ä»¤ âœ…
- [x] å®ç° `confkit log list --space <space> --project <project>`
- [x] å®ç° `confkit log show --space <space> --project <project> <filename>`
- [x] å®ç°æ™ºèƒ½æ–‡ä»¶ååŒ¹é…ï¼ˆå®Œæ•´æ–‡ä»¶åã€ç‰‡æ®µã€ä»»åŠ¡IDï¼‰
- [x] å®ç° `--lines <n>` è¡Œæ•°é™åˆ¶
- [x] å®ç° `--timestamps` æ—¶é—´æˆ³æ˜¾ç¤º
- [x] å®ç° `--follow` å®æ—¶è·Ÿè¸ªæ¨¡å¼
- [x] å®ç° `--step <step-name>` æ­¥éª¤è¿‡æ»¤
- [x] å®ç° `--level <level>` æ—¥å¿—çº§åˆ«è¿‡æ»¤

**éªŒè¯ç»“æœ**: âœ… æ‰§è¡Œä»»åŠ¡åèƒ½æŸ¥çœ‹å’Œè·Ÿè¸ªå„ç§æ ¼å¼çš„æ—¥å¿—

## ğŸš§ é˜¶æ®µ 6: Interactive å‘½ä»¤å®ç° (P2) - éƒ¨åˆ†å®Œæˆ
> ç›®æ ‡ï¼šå®ç°äº¤äº’å¼ç•Œé¢ï¼Œé›†æˆæ‰€æœ‰å‘½ä»¤åŠŸèƒ½

### 6.1 äº¤äº’å¼æ ¸å¿ƒ âœ…
- [x] å®ç°ä¸»èœå•ç•Œé¢
- [x] å®ç°é¡¹ç›®é…ç½®é€‰æ‹©
- [x] å®ç°å®æ—¶çŠ¶æ€æ˜¾ç¤º

### 6.2 å‘½ä»¤é›†æˆ ğŸš§
- [x] é›†æˆ builder å‘½ä»¤åŠŸèƒ½
  - [x] start
  - [x] stop
  - [x] remove
  - [x] image 
    - [x] list 
    - [x] create
    - [x] removeï¼ˆåŒ…å«æ™ºèƒ½å¤šé€‰å’Œçº§è”é€‰æ‹©ï¼‰
- [x] é›†æˆ run å‘½ä»¤åŠŸèƒ½  
- [x] é›†æˆ log å‘½ä»¤åŠŸèƒ½
  - [x] Space/Project é€‰æ‹©
  - [x] æ—¥å¿—æ–‡ä»¶é€‰æ‹©å’ŒæŸ¥çœ‹
  - [x] æ™ºèƒ½è·¯å¾„å¤„ç†
- [ ] é›†æˆ task å‘½ä»¤åŠŸèƒ½

### 6.3 äº¤äº’å¼å¢å¼º ğŸš§
- [ ] å®ç°å¿«æ·é”®æ“ä½œ
- [ ] å®ç°ä»»åŠ¡è¿›åº¦å¯è§†åŒ–
- [ ] å®ç°å®æ—¶æ—¥å¿—æ˜¾ç¤º

**éªŒè¯ç»“æœ**: âœ… `confkit interactive` èƒ½è°ƒç”¨ builder å’Œ log åŠŸèƒ½

## ğŸ”„ é˜¶æ®µ 7: é«˜çº§åŠŸèƒ½å¢å¼º (P2) - å¾…å¼€å‘
> ç›®æ ‡ï¼šå®Œå–„å¹¶è¡Œæ‰§è¡Œã€é€šçŸ¥ç­‰é«˜çº§ç‰¹æ€§

### 7.1 å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
- [ ] å®ç°ä¾èµ–å›¾æ„å»ºå’Œå¾ªç¯æ£€æµ‹
- [ ] å®ç° `parallel_group` æ”¯æŒ
- [ ] å®ç°æ­¥éª¤å¹¶å‘æ§åˆ¶

### 7.2 é€šçŸ¥ç³»ç»Ÿ
- [ ] å®ç° Webhook é€šçŸ¥
- [ ] å®ç°æ„å»ºçŠ¶æ€é€šçŸ¥

### 7.3 ç½‘ç»œå·¥å…·
- [ ] å®ç°ç½‘ç»œè¿æ¥æµ‹è¯•
- [ ] å®ç°ä»£ç†æ”¯æŒ

**éªŒè¯ç›®æ ‡**: éªŒè¯å¤æ‚ä¾èµ–å…³ç³»å’Œé€šçŸ¥åŠŸèƒ½

## éªŒè¯é‡Œç¨‹ç¢‘

### âœ… é‡Œç¨‹ç¢‘ 1: åŸºç¡€æ„å»ºå™¨ (é˜¶æ®µ 1-2)
èƒ½å¤Ÿè§£æé…ç½®æ–‡ä»¶å¹¶ç®¡ç† Docker æ„å»ºå™¨

### âœ… é‡Œç¨‹ç¢‘ 2: æ ¸å¿ƒæ‰§è¡Œ (é˜¶æ®µ 3) 
åŸºç¡€çš„ä»»åŠ¡æ‰§è¡Œæµç¨‹ï¼Œæ”¯æŒæœ¬åœ°å’Œå®¹å™¨åŒ–æ„å»º

### âœ… é‡Œç¨‹ç¢‘ 3: æ—¥å¿—ç³»ç»Ÿ (é˜¶æ®µ 5)
å®Œæ•´çš„æ—¥å¿—è®°å½•ã€æŸ¥çœ‹å’Œç®¡ç†ç³»ç»Ÿ

### ğŸš§ é‡Œç¨‹ç¢‘ 4: äº¤äº’å®Œæ•´ (é˜¶æ®µ 6)
äº¤äº’å¼ç•Œé¢é›†æˆä¸»è¦å‘½ä»¤åŠŸèƒ½ï¼ˆBuilder + Log + Run å·²å®Œæˆï¼‰

### ğŸ”„ é‡Œç¨‹ç¢‘ 5: ç”Ÿäº§å°±ç»ª (é˜¶æ®µ 7)
Taskç®¡ç†ã€å¹¶è¡Œæ‰§è¡Œã€é€šçŸ¥ç­‰é«˜çº§ç‰¹æ€§çš„ç”Ÿäº§çº§å·¥å…· 

## å½“å‰å¼€å‘é‡ç‚¹

### ä¼˜å…ˆçº§ P0 - ç«‹å³å¼€å‘
1. **Task å‘½ä»¤å®ç°** - å®Œå–„ä»»åŠ¡ç®¡ç†åŠŸèƒ½
2. **Interactive Task é›†æˆ** - å°† task åŠŸèƒ½é›†æˆåˆ°äº¤äº’å¼ç•Œé¢

### ä¼˜å…ˆçº§ P1 - è¿‘æœŸè§„åˆ’
1. **é«˜çº§å¹¶è¡Œæ‰§è¡Œ** - ä¾èµ–è§£æå’Œå¹¶å‘æ§åˆ¶
2. **å¢å¼ºäº¤äº’ä½“éªŒ** - å¿«æ·é”®ã€è¿›åº¦æ¡ç­‰

### ä¼˜å…ˆçº§ P2 - é•¿æœŸè§„åˆ’
1. **é€šçŸ¥ç³»ç»Ÿ** - Webhook å’ŒçŠ¶æ€é€šçŸ¥
2. **æ€§èƒ½ä¼˜åŒ–** - å¤§è§„æ¨¡æ„å»ºæ”¯æŒ

## v2.0 è§„åˆ’
- é‡åšæ¶æ„ä¼˜åŒ–
- i18n(en/zh)
- print æ¨¡æ¿é›†ä¸­ç®¡ç†
- é…ç½®æ–‡ä»¶ loader é›†ä¸­ç®¡ç†
- é…ç½®æ–‡ä»¶è®¾è®¡ä¼˜åŒ–